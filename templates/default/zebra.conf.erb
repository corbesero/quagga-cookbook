!!! ZEBRA CONFIGURATION
!
<% unless node.quagga.integrated_vtysh_config -%>
hostname zebra
password <%= node.quagga.password %>
enable password <%= node.quagga.enabled_password %>
log file /var/log/quagga/zebra.log
!
<% end -%>
<% @interfaces.each do |port,options|-%>
interface <%= port %>
<% options.each do |option|-%>
 <%= option %>
<% end -%>
 link-detect
 ipv6 nd suppress-ra
!
<% end -%>
!
<% @static_routes.each do |network,nexthop| -%>
ip route <%= network %> <%= nexthop %>
<% end -%>
!
<% @prefix_lists.each do |list,rules| -%>
  <% rules.each do |seq,data| -%>
    <% rule = "ip prefix-list #{list} seq #{seq} #{data[:action]} #{data[:prefix]}" -%>
    <% rule << " le #{data[:le]}" if data[:le] -%>
    <% rule << " ge #{data[:ge]}" if data[:ge] -%>
 <%= rule %>
  <% end -%>
<% end -%>
!
ip forwarding
ipv6 forwarding
!
!
line vty
!
