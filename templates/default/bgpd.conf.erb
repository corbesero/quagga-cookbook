!!! BGP CONFIGURATION
!
<% unless node.quagga.integrated_vtysh_config -%>
hostname bgpd
password <%= node.quagga.password %>
enable password <%= node.quagga.enabled_password %>
log file /var/log/quagga/bgpd.log
!
<% end -%>
router bgp <%= @local_asn %>
<% if @router_id -%>
 bgp router-id <%= @router_id %>
<% end -%>
 bgp log-neighbor-changes
<% @networks.each do |i| -%>
 network <%= i %>
<% end -%>
<% @ebgp_peers.each do |asn,v| -%>
 <% v[:ip].each do |ip| -%>
 neighbor <%= ip %> remote-as <%= asn %>
 neighbor <%= ip %> next-hop-self
 <% end -%>
<% end -%>
!
line vty
!
